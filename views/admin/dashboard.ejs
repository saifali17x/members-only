<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Members Only Club</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glow-effect {
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
        }

        .glow-effect:hover {
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.5);
        }

        .glassmorphism {
            backdrop-filter: blur(10px);
            background-color: rgba(30, 41, 59, 0.8);
        }
    </style>
</head>

<body class="min-h-screen" style="background-color: #0F172A;">
    <nav class="p-5 shadow-lg glassmorphism" style="color: #E2E8F0;">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">‚ö° Admin Dashboard</h1>
            <div class="flex gap-5">
                <a href="/" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                    onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                    onmouseout="this.style.backgroundColor='transparent'">Home</a>
                <a href="/messages" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                    onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                    onmouseout="this.style.backgroundColor='transparent'">Messages</a>
                <a href="/profile" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                    onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                    onmouseout="this.style.backgroundColor='transparent'">Profile</a>
                <a href="/logout" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                    onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                    onmouseout="this.style.backgroundColor='transparent'">Logout</a>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto my-10 px-5">
        <div class="mb-8">
            <h1 class="text-4xl font-bold mb-2" style="color: #E2E8F0;">Admin Control Panel</h1>
            <p style="color: #94A3B8;">Manage users, messages, and monitor community activity</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-5 mb-10">
            <div class="rounded-lg p-8 shadow-md text-center hover:-translate-y-1 transition-transform glow-effect"
                style="background-color: #1E293B;">
                <div class="text-5xl mb-4">üë•</div>
                <div class="text-5xl font-bold mb-2" style="color: #38BDF8;">
                    <%= stats.totalUsers %>
                </div>
                <div class="text-lg font-medium" style="color: #94A3B8;">Total Users</div>
            </div>
            <div class="rounded-lg p-8 shadow-md text-center hover:-translate-y-1 transition-transform glow-effect"
                style="background-color: #1E293B;">
                <div class="text-5xl mb-4">‚úÖ</div>
                <div class="text-5xl font-bold mb-2" style="color: #F472B6;">
                    <%= stats.totalMembers %>
                </div>
                <div class="text-lg font-medium" style="color: #94A3B8;">Club Members</div>
            </div>
            <div class="rounded-lg p-8 shadow-md text-center hover:-translate-y-1 transition-transform glow-effect"
                style="background-color: #1E293B;">
                <div class="text-5xl mb-4">üì¨</div>
                <div class="text-5xl font-bold mb-2" style="color: #38BDF8;">
                    <%= stats.totalMessages %>
                </div>
                <div class="text-lg font-medium" style="color: #94A3B8;">Total Messages</div>
            </div>
        </div>

        <div class="rounded-lg p-8 shadow-md mb-8" style="background-color: #1E293B;">
            <h2 class="text-2xl font-bold mb-5 pb-4 border-b-2" style="color: #E2E8F0; border-color: #334155;">üë• User
                Management</h2>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr style="background-color: #0F172A;">
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Name</th>
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Email</th>
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Status</th>
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Joined</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% users.forEach(user=> { %>
                            <tr class="transition-colors" onmouseover="this.style.backgroundColor='#0F172A'"
                                onmouseout="this.style.backgroundColor='transparent'">
                                <td class="p-4 border-b" style="border-color: #334155;"><strong style="color: #E2E8F0;">
                                        <%= user.first_name %>
                                            <%= user.last_name %>
                                    </strong></td>
                                <td class="p-4 border-b" style="color: #94A3B8; border-color: #334155;">
                                    <%= user.email %>
                                </td>
                                <td class="p-4 border-b" style="border-color: #334155;">
                                    <% if (user.is_admin) { %>
                                        <span class="px-2 py-1 rounded-xl text-xs font-semibold"
                                            style="background-color: rgba(251, 191, 36, 0.2); color: #FBB936;">‚≠ê
                                            Admin</span>
                                        <% } %>
                                            <% if (user.is_member) { %>
                                                <span class="px-2 py-1 rounded-xl text-xs font-semibold"
                                                    style="background-color: rgba(34, 197, 94, 0.2); color: #4ADE80;">‚úÖ
                                                    Member</span>
                                                <% } else { %>
                                                    <span class="px-2 py-1 rounded-xl text-xs font-semibold"
                                                        style="background-color: rgba(100, 116, 139, 0.2); color: #94A3B8;">üë§
                                                        User</span>
                                                    <% } %>
                                </td>
                                <td class="p-4 border-b" style="color: #94A3B8; border-color: #334155;">
                                    <%= new Date(user.joined_date).toLocaleDateString('en-US', { month: 'short' ,
                                        day: 'numeric' , year: 'numeric' }) %>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="rounded-lg p-8 shadow-md" style="background-color: #1E293B;">
            <h2 class="text-2xl font-bold mb-5 pb-4 border-b-2" style="color: #E2E8F0; border-color: #334155;">üì¨ Recent
                Messages</h2>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr style="background-color: #0F172A;">
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Title</th>
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Author</th>
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Posted</th>
                            <th class="text-left p-4 font-semibold border-b-2"
                                style="color: #E2E8F0; border-color: #334155;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% messages.forEach(message=> { %>
                            <tr class="transition-colors" onmouseover="this.style.backgroundColor='#0F172A'"
                                onmouseout="this.style.backgroundColor='transparent'">
                                <td class="p-4 border-b" style="border-color: #334155;">
                                    <strong style="color: #E2E8F0;">
                                        <%= message.title %>
                                    </strong>
                                    <div class="text-sm mt-1 max-w-md truncate" style="color: #64748B;">
                                        <%= message.text %>
                                    </div>
                                </td>
                                <td class="p-4 border-b" style="color: #94A3B8; border-color: #334155;">
                                    <%= message.first_name %>
                                        <%= message.last_name %>
                                </td>
                                <td class="p-4 border-b" style="color: #94A3B8; border-color: #334155;">
                                    <%= new Date(message.created_at).toLocaleDateString('en-US', { month: 'short' ,
                                        day: 'numeric' , year: 'numeric' }) %>
                                </td>
                                <td class="p-4 border-b" style="border-color: #334155;">
                                    <form action="/messages/<%= message.message_id %>/delete" method="POST"
                                        class="inline"
                                        onsubmit="return confirm('Are you sure you want to delete this message?')">
                                        <button type="submit" class="px-3 py-1 rounded-lg text-sm transition-colors"
                                            style="background-color: #DC2626; color: #E2E8F0;"
                                            onmouseover="this.style.backgroundColor='#B91C1C'"
                                            onmouseout="this.style.backgroundColor='#DC2626'">üóëÔ∏è
                                            Delete</button>
                                    </form>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</body>

</html>