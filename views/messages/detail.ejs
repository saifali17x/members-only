<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= message.title %> - Members Only Club
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glow-effect {
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
        }

        .glow-effect:hover {
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.5);
        }

        .glassmorphism {
            backdrop-filter: blur(10px);
            background-color: rgba(30, 41, 59, 0.8);
        }
    </style>
</head>

<body class="min-h-screen" style="background-color: #0F172A;">
    <nav class="p-5 shadow-lg glassmorphism" style="color: #E2E8F0;">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <a href="/" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                onmouseout="this.style.backgroundColor='transparent'">‚Üê Back to Messages</a>
            <div class="flex gap-5">
                <% if (user) { %>
                    <a href="/profile" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                        onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                        onmouseout="this.style.backgroundColor='transparent'">Profile</a>
                    <a href="/logout" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                        onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                        onmouseout="this.style.backgroundColor='transparent'">Logout</a>
                    <% } else { %>
                        <a href="/login" class="px-4 py-2 rounded-lg transition-colors" style="color: #E2E8F0;"
                            onmouseover="this.style.backgroundColor='rgba(56, 189, 248, 0.2)'"
                            onmouseout="this.style.backgroundColor='transparent'">Login</a>
                        <% } %>
            </div>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto my-10 px-5">
        <div class="rounded-lg p-10 shadow-xl" style="background-color: #1E293B;">
            <h1 class="text-4xl font-bold mb-5" style="color: #E2E8F0;">
                <%= message.title %>
            </h1>

            <div class="py-4 mb-8 border-b-2 text-base" style="border-color: #334155; color: #94A3B8;">
                <% if (user && user.is_member && message.first_name) { %>
                    <span>Posted by </span>
                    <span class="font-semibold" style="color: #38BDF8;">
                        <%= message.first_name %>
                            <%= message.last_name %>
                    </span>
                    <span> on <%= new Date(message.created_at).toLocaleDateString('en-US', { month: 'long' ,
                            day: 'numeric' , year: 'numeric' }) %></span>
                    <% } else { %>
                        <span class="italic">üîí Author hidden (Join the club to see who posted this)</span>
                        <% } %>
            </div>

            <div class="text-lg leading-relaxed mb-8 whitespace-pre-wrap" style="color: #E2E8F0;">
                <%= message.text %>
            </div>

            <div class="flex gap-4">
                <a href="/messages" class="px-6 py-3 rounded-lg font-semibold hover:-translate-y-0.5 transition-all"
                    style="background-color: #334155; color: #E2E8F0;">‚Üê
                    All Messages</a>

                <% if (user && user.is_admin) { %>
                    <form action="/messages/<%= message.message_id %>/delete" method="POST" class="inline"
                        onsubmit="return confirm('Are you sure you want to delete this message?')">
                        <button type="submit"
                            class="px-6 py-3 rounded-lg font-semibold hover:-translate-y-0.5 transition-all"
                            style="background-color: #DC2626; color: #E2E8F0;"
                            onmouseover="this.style.backgroundColor='#B91C1C'"
                            onmouseout="this.style.backgroundColor='#DC2626'">üóëÔ∏è
                            Delete Message</button>
                    </form>
                    <% } %>
            </div>
        </div>
    </div>
</body>

</html>